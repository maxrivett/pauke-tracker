<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>NFL Pool Tracker</title>
  <link rel="stylesheet" href="assets/styles.css"/>
</head>
<body>
  <header class="bar">
    <div class="title">NFL Pool Tracker</div>
    <div class="controls">
      <button id="refreshBtn" class="btn primary">Refresh</button>
      <span id="lastUpdated" class="muted"></span>
      <!-- app.js will append "Source: remote/local" here -->
    </div>
  </header>

  <section id="weekTabs" class="tabs"></section>

  <section class="grid">
    <!-- Only visible if ?source=local -->
    <aside class="panel" id="pastePanel">
      <details open>
        <summary><strong>Paste your weekly picks (local draft only)</strong></summary>
        <p class="muted small">
          Visitors don’t need this. This is for you if you want to test locally.
          Normally, the site loads <code>picks/{season}.json</code> committed to GitHub.
        </p>
        <textarea id="pasteInput" rows="16" placeholder="Paste weekly picks here..."></textarea>
        <div class="row">
          <button id="parseBtn" class="btn">Parse</button>
          <button id="clearPasteBtn" class="btn">Clear</button>
        </div>
        <div id="parseErrors" class="errors"></div>
        <div id="preview" class="preview"></div>
        <div class="row">
          <button id="saveWeekBtn" class="btn success">Save to Selected Week (local only)</button>
        </div>
      </details>
      <div class="hint small muted">
        To publish: export locally, then commit as <code>picks/{season}.json</code>.
      </div>
    </aside>

    <main>
      <div id="summary" class="summary">
        <span id="sumCorrect" class="chip ok">Correct: 0</span>
        <span id="sumWrong" class="chip bad">Incorrect: 0</span>
        <span id="sumPush" class="chip push">Push: 0</span>
        <span id="sumProg" class="chip pending">In Progress: 0</span>
        <span id="sumNot" class="chip">Not Started: 0</span>
        <span id="survivorChip" class="chip survivor">Survivor: —</span>
        <span id="marginatorChip" class="chip marginator">Marginator: —</span>
      </div>

      <div class="table-wrap">
        <table id="resultsTable">
          <thead>
            <tr>
              <th>#</th>
              <th>Game</th>
              <th>Spread</th>
              <th>Your Pick</th>
              <th>Score</th>
              <th>Status</th>
              <th>ATS Result</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody id="resultsBody"></tbody>
        </table>
      </div>
    </main>
  </section>

  <footer class="bar foot">
    <span class="muted small">
      Static site • GitHub Pages ready • Data source: <code>picks/{season}.json</code>
    </span>
  </footer>

  <script src="app.js"></script>
  <script>
    // Hide the paste panel unless ?source=local is in the URL
    if (!location.search.includes('source=local')) {
      document.getElementById('pastePanel').style.display = 'none';
    }
  </script>
</body>
</html>
